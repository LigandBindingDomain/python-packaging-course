<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.75.1" />
    <meta name="description" content="">


    <link rel="icon" href="/python-packaging-course/images/favicon.png" type="image/png">

    <title>Uploading distributions to PyPI :: OxRSE Python Packaging Workshop</title>

    
    <link href="/python-packaging-course/css/nucleus.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/fontawesome-all.min.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/hybrid.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/featherlight.min.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/perfect-scrollbar.min.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/auto-complete.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/atom-one-dark-reasonable.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/theme.css?1600786696" rel="stylesheet">
    <link href="/python-packaging-course/css/hugo-theme.css?1600786696" rel="stylesheet">
    
    <link href="/python-packaging-course/css/theme-oxrse.css?1600786696" rel="stylesheet">
    
    

    <script src="/python-packaging-course/js/jquery-3.3.1.min.js?1600786696"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/python-packaging-course/part3_sharing_a_package/uploading_to_pypi/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://oxfordrse.github.io/python-packaging-course/">
    <img src="/python-packaging-course/banner_ox_rse.png" alt="oxrse banner logo"/>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/python-packaging-course/js/lunr.min.js?1600786696"></script>
<script type="text/javascript" src="/python-packaging-course/js/auto-complete.js?1600786696"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/oxfordrse.github.io\/python-packaging-course\/";
    
</script>
<script type="text/javascript" src="/python-packaging-course/js/search.js?1600786696"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/python-packaging-course/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/python-packaging-course/introduction/">
          Introduction
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/python-packaging-course/part1_making_a_package/" title="Making a package" class="dd-item 
        
        
        
        ">
      <a href="/python-packaging-course/part1_making_a_package/">
          Making a package
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part1_making_a_package/from_scripts_to_modules/" title="From scripts to modules" class="dd-item ">
        <a href="/python-packaging-course/part1_making_a_package/from_scripts_to_modules/">
        From scripts to modules
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part1_making_a_package/separating_methods_from_parameters_and_data/" title="Separating methods from parameters and data" class="dd-item ">
        <a href="/python-packaging-course/part1_making_a_package/separating_methods_from_parameters_and_data/">
        Separating methods from parameters and data
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part1_making_a_package/the_tstools_package/" title="The tstools package" class="dd-item ">
        <a href="/python-packaging-course/part1_making_a_package/the_tstools_package/">
        The tstools package
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part1_making_a_package/init_dot_pie/" title="init dot pie" class="dd-item ">
        <a href="/python-packaging-course/part1_making_a_package/init_dot_pie/">
        init dot pie
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/python-packaging-course/part2_reusing_a_package/" title="Reusing a package across analyses" class="dd-item 
        
        
        
        ">
      <a href="/python-packaging-course/part2_reusing_a_package/">
          Reusing a package across analyses
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part2_reusing_a_package/another-analysis/" title="Another analysis" class="dd-item ">
        <a href="/python-packaging-course/part2_reusing_a_package/another-analysis/">
        Another analysis
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part2_reusing_a_package/where-does-python-look-for-packages/" title="Where does python look for packages?" class="dd-item ">
        <a href="/python-packaging-course/part2_reusing_a_package/where-does-python-look-for-packages/">
        Where does python look for packages?
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part2_reusing_a_package/setuptools-and-setup-do-_pie/" title="setuptools, setup dot pie and pip" class="dd-item ">
        <a href="/python-packaging-course/part2_reusing_a_package/setuptools-and-setup-do-_pie/">
        setuptools, setup dot pie and pip
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part2_reusing_a_package/maintaining-your-pkg-independantly-from-your-analysis/" title="Maintaining your package indepently from the anaylises that use it" class="dd-item ">
        <a href="/python-packaging-course/part2_reusing_a_package/maintaining-your-pkg-independantly-from-your-analysis/">
        Maintaining your package indepently from the anaylises that use it
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part2_reusing_a_package/summary_and_break/" title="Summary and break" class="dd-item ">
        <a href="/python-packaging-course/part2_reusing_a_package/summary_and_break/">
        Summary and break
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/python-packaging-course/intermezzo_virtual_environments/" title="Virtual environments" class="dd-item 
        
        
        
        ">
      <a href="/python-packaging-course/intermezzo_virtual_environments/">
          Virtual environments
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/intermezzo_virtual_environments/installing_different_versions_of_a_package/" title="Installing different versions of a package" class="dd-item ">
        <a href="/python-packaging-course/intermezzo_virtual_environments/installing_different_versions_of_a_package/">
        Installing different versions of a package
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/intermezzo_virtual_environments/virtual_environments/" title="Virtual environments" class="dd-item ">
        <a href="/python-packaging-course/intermezzo_virtual_environments/virtual_environments/">
        Virtual environments
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/intermezzo_virtual_environments/make_virtual_environments_a_habit/" title="Make virtual environments a habit" class="dd-item ">
        <a href="/python-packaging-course/intermezzo_virtual_environments/make_virtual_environments_a_habit/">
        Make virtual environments a habit
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/intermezzo_virtual_environments/summary/" title="Summary" class="dd-item ">
        <a href="/python-packaging-course/intermezzo_virtual_environments/summary/">
        Summary
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/python-packaging-course/part3_sharing_a_package/" title="Sharing a package" class="dd-item 
        parent
        
        
        ">
      <a href="/python-packaging-course/part3_sharing_a_package/">
          Sharing a package
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part3_sharing_a_package/building_distributions/" title="Building python distributions" class="dd-item ">
        <a href="/python-packaging-course/part3_sharing_a_package/building_distributions/">
        Building python distributions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python-packaging-course/part3_sharing_a_package/uploading_to_pypi/" title="Uploading distributions to PyPI" class="dd-item active">
        <a href="/python-packaging-course/part3_sharing_a_package/uploading_to_pypi/">
        Uploading distributions to PyPI
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/python-packaging-course/'></a> > <a href='/python-packaging-course/part3_sharing_a_package/'>Sharing a package</a> > Uploading distributions to PyPI
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#package-repositories">Package repositories</a></li>
    <li><a href="#publishing-distributions-to-the-test-pypi-index">Publishing distributions to the test PyPI index</a>
      <ul>
        <li><a href="#activity-7-publishing-distributions-to-testpypi">Activity 7 - Publishing distributions to TestPyPI</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Uploading distributions to PyPI
            </h1>
          

        


<p>In the previous section you learned how to create distributions for your packages.
In this section, we look at how to share them with others, so that other people can easily install and use your packages.</p>
<h2 id="package-repositories">Package repositories</h2>
<p>Let&rsquo;s think about distributing packages for a minute.
If you wanted to share one of your distributions (whether it&rsquo;s a source distribution or a wheel distribution) with a colleague, how would
you proceed?
If you both work next to each other, you could simply exchange a USB stick. If not, you can probably email the distribution, or share it <em>via</em> a cloud host.</p>
<p>Although effective on a short term basis, these solutions present serious shortcomings:</p>
<ul>
<li>You would have to share the distribution again each time you make a change to the package.</li>
<li>If your colleague wants a specific version (that&rsquo;s not the latest), you would have to check out the old version of your package and build the distribution again - unless your manually
keep track of all your distributions.</li>
<li>Users of your package must contact you to get the distribution, and wait for you to get back to them.</li>
</ul>
<p>These issues can be overcome by using <em>package repositories</em>. A package repository is just an index of packages hosted on distant servers, available to download from installation.
If you&rsquo;re using GNU/Linux, you use a package repository each time you install new software: <code>apt install libreoffice</code> is nothing but a request for the package <code>libreoffice</code> to one of
the Ubuntu package repositories.</p>
<p>The main reposotiry for Python is the <a href="https://pypi.org/">Python Package Index</a> (PyPI).
Whenever you install a package with <code>pip install package</code>, <code>pip</code> first check than <code>package</code> isnt a directory on your machine (in which case <code>pip</code> tries to install it as a package).
If not, <code>pip</code> makes a request to PyPI and, if it exists, downloads and install package <code>package</code>.</p>
<h2 id="publishing-distributions-to-the-test-pypi-index">Publishing distributions to the test PyPI index</h2>
<p>Once a package is uploaded to PyPI, it cannot easily be removed.
This is to prevent packages from disappearing without warning while other software depends on it.
To test publishing our distributions, we can use <a href="https://test.pypi.org">test.pypi.org</a> instead of the regular <a href="https://pypi.org/">pypi.org</a>.
This is a separate database dedicated to tests and experiments.</p>
<p>Uploading distributions to PyPI and (TestPyPI) is a very simple process, thanks to <a href="https://twine.readthedocs.io/en/latest/">twine</a>, a utility for publishing Python packages on PyPI.
Installing twine is as simple as</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pip install twine
</code></pre></div><p>You can now upload a distribution to to the regular PyPI (not the test one) as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">twine upload dist/tstools-0.1-py3-none-any.whl
</code></pre></div><p>You will be asked for your usernanme and password for PyPI. To create an account, visit <a href="https://pypi.org/account/register/">https://pypi.org/account/register/</a>.
If you find yourself uploading packages often, or if you are concerned about security, it is possible to authenticate to PyPI using
a token that&rsquo;s specific for your account, or a particular project. This token is usually configured in a <code>~/.pypirc</code> file, and allows you to authenticate
without entering your username and password every time. Note that you might want to encrypt <code>~/.pypirc</code> if concerned about security.</p>
<h3 id="activity-7-publishing-distributions-to-testpypi">Activity 7 - Publishing distributions to TestPyPI</h3>
<ol>
<li>
<p>On PyPI (or TestPyPI), there cannot be two package with the same name. Therefore, before you upload your <code>tstools</code> package,
you must give the project a unique name. To do so, open the <code>tstools-dist/setup.py</code> file and change the <code>name</code> entry
in the call to the <code>setup</code> function to something unique to you, for instance:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;tstools-&lt;yourname&gt;&#39;</span>
</code></pre></div></li>
<li>
<p>Install <code>twine</code> in your <code>python-packaging-venv</code> environment</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pip install twine
</code></pre></div></li>
<li>
<p>If you created some distributions in the previous sections, remove everything inside your <code>dist/</code> directory</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">rm dist/*
</code></pre></div></li>
<li>
<p>Create a source distribution and a wheel for your <code>tstools</code> package</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">python setup.py sdist bdist_wheel
</code></pre></div></li>
<li>
<p>If you don&rsquo;t have one, create an account on the Test PyPI index by visiting <a href="https://pypi.org/account/register/">https://pypi.org/account/register/</a>.</p>
</li>
<li>
<p>Lastly, publish your distributions to the test PyPI index:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">twine upload --repository testpypi dist/*
</code></pre></div><p>Can you find your package on <a href="https://test.pypi.org">test.pypi.org</a> ?</p>
</li>
<li>
<p>Create a new virtual environment and install your <code>tstools</code> package from the test PyPI index</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pip install --index-url https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple your-package
</code></pre></div><p>The above command is a bit lengthy, but it&rsquo;s just because we are installing from the test
index instead of the regular one. <code>--index-url https://test.pypi.org/simple/</code> tells <code>pip</code>
to look for the package at <code>test.pypi.org</code> instead of <code>pypi.org</code> (which is the default).
In addition, <code>--extra-index-url https://pypi.org/simple</code> tells <code>pip</code> to looks for dependencies
in the regular index, instead of the test one. In our case dependencies are <code>numpy</code> and <code>matplotlib</code>.</p>
</li>
</ol>
<p>Congratulations! You just published your first Python package.</p>
<p>Remarks:</p>
<ul>
<li>
<p>It&rsquo;s always a good idea to first publish your package on the test index, before
you publish it to the real index.</p>
</li>
<li>
<p><code>twine</code> and <code>pip</code> defaut to the real index <a href="https://pypi.org">https://pypi.org</a>, so commands are really simple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">twine upload &lt;distributions&gt; <span style="color:#75715e"># Publish package</span>
pip install &lt;package name&gt; <span style="color:#75715e"># Install package from pypi.org</span>
</code></pre></div></li>
<li>
<p>You can, and <em>should</em> publish your package each time you make a new version of it.
All versions are stored on PyPI, and are accessible from pip.
See the <a href="https://pypi.org/project/numpy/#history">release history for numpy</a> for example.
You could just install a specific version of numpy with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pip install numpy<span style="color:#f92672">==</span>1.17.5
</code></pre></div></li>
<li>
<p>Note that <em>you cannot</em> erase a published version of your package.
If you discover a bug in a version of your package that already has been published and want to fix it without changing the version number,
what is known as a <em>post-release</em>, <em>i.e</em> adding <code>.postX</code> add the end of the faulty version number.
For instance:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">setup(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;tstools&#39;</span>,
      version<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;0.1.post1&#39;</span>,
      <span style="color:#f92672">...</span>)
</code></pre></div><p>and upload your fixed package.
This will still be considered version <code>0.1</code>, but <code>pip install tstools==0.1</code> will download
the <code>0.1.post1</code> version.
Note that you could publish subsequent post-releases, <em>i.e</em> <code>.post2</code>, <code>.post3</code>&hellip;</p>
</li>
</ul>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/python-packaging-course/part3_sharing_a_package/building_distributions/" title="Building python distributions"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/python-packaging-course/part3_sharing_a_package/building_distributions/" title="Building python distributions" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/python-packaging-course/js/clipboard.min.js?1600786696"></script>
    <script src="/python-packaging-course/js/perfect-scrollbar.min.js?1600786696"></script>
    <script src="/python-packaging-course/js/perfect-scrollbar.jquery.min.js?1600786696"></script>
    <script src="/python-packaging-course/js/jquery.sticky.js?1600786696"></script>
    <script src="/python-packaging-course/js/featherlight.min.js?1600786696"></script>
    <script src="/python-packaging-course/js/highlight.pack.js?1600786696"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/python-packaging-course/js/modernizr.custom-3.6.0.js?1600786696"></script>
    <script src="/python-packaging-course/js/learn.js?1600786696"></script>
    <script src="/python-packaging-course/js/hugo-learn.js?1600786696"></script>
    
        
            <script src="/python-packaging-course/mermaid/mermaid.js?1600786696"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

